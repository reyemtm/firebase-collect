<!DOCTYPE html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Open Collect</title>
  <meta name="description" content="">
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
  <meta name="mobile-web-app-capable" content="yes">

  <link rel="stylesheet" href="/css/spectre.min.css">
  <link rel="stylesheet" href="/css/spectre-exp.min.css">
  <link rel="stylesheet" href="/css/spectre-icons.min.css">
  <link rel="stylesheet" href="/vendor/mapbox-gl.css" />
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="manifest" href="/manifest.json" />
  <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
      navigator.serviceWorker.register('/sw.js').then(function(registration) {
        // Registration was successful
      // Optionally, set 'scope' here, if needed.
        console.log('ServiceWorker registration successful with scope: ', registration.scope);
      }, function(err) {
        // registration failed :(
        console.log('ServiceWorker registration failed: ', err);
      });
    });
  }
  </script>
</head>

<body>
  <!-- LOADER -->
  <div class="loading-background">
    <div class="loading loading-lg"></div>
  </div>
  <div class="loading-background" style="display: none;">
    <div class="loading loading-lg"></div>
  </div>

  <div class="off-canvas">

    <div id="sidebar-id" class="off-canvas-sidebar" style="display: flex;flex-direction: column;padding: 0.5rem;">
        <div id="sidebarHeader">
          <h4>Open Collect</h4>
        </div>

        <div id="sidebarBody" style="flex-grow: 1;">
          <h5>Layer Control</h5>
          <div id="layerControl">

          </div>
        </div>

        <div id="sidebarFooter">
            Version 0.0.4<br>
            <button id="updateApp" class="btn btn-sm btn-outline">Update App</button>
          <div id="position"></div>
        </div>
    </div>

    <a class="off-canvas-overlay" href="#close"></a>

    <div class="off-canvas-content">
      <!-- off-screen content -->
      <!-- MAP -->
      <div id="map">
        <div id="mapToolbar">
          <div id="left">
            <a  href="#sidebar-id" class="btn btn-action btn-lg"><i class="icon icon-menu"></i></a>
          </div>
          <div id="middle">
          </div>
          <div id="right">
          </div>
        </div>
        <div id="mapToolbarBottom">
        </div>
      </div>
    </div>
  </div>



  <!-- TOAST MESSAGES -->
  <div class="toast text-center toast-primary">
    <button class="btn btn-clear float-right"></button>
    <button class="btn btn-clear btn-expand float-left"></button>
    <div></div>
  </div>

  <!-- MODALS -->
  <div class="modal" id="edit">
    <a href="#close" class="modal-overlay" aria-label="Close"></a>
    <div class="modal-container">
      <div class="modal-body">
        <a href="#close" class="btn btn-clear float-right" aria-label="Close"></a>
        <div class="content">
          <form>

          </form>
        </div>
      </div>
    </div>
  </div>
  <div class="modal" id="login">
    <a href="#close" class="modal-overlay" aria-label="Close"></a>
    <div class="modal-container">
      <div class="modal-header">
        <a href="#close" class="btn btn-clear float-right" aria-label="Close"></a>
        <div class="modal-title h4">COZ Collection App Login</div>
      </div>
      <div class="modal-body">
        <div class="content">
          <form id="dbLoginForm">
            <input class="form-input" type="email" id="userEmail" placeholder="email"><br>
            <input class="form-input" type="password" id="userPass" placeholder="password"><br>
            <input class="form-input btn btn-primary" type="submit" value="Login">
          </form>
        </div>
      </div>
      <div class="modal-footer">
        <a class="btn" href="#modals-sizes">Continue as Guest</a>
      </div>
    </div>
  </div>
  <script>
    var updateButton = document.getElementById("updateApp");
    updateButton.addEventListener("click", function() {
      var random = (Math.random() * 1000);
      var url = window.location.protocol + "//" + window.location.host + "/?" + random;
      window.location.assign(url)
    })
  </script>
  <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
  <script src="/__/firebase/7.5.2/firebase-app.js"></script>

  <!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
  <script src="/__/firebase/7.5.2/firebase-analytics.js"></script>

  <!-- Add Firebase products that you want to use -->
  <script src="/__/firebase/7.5.2/firebase-auth.js"></script>
  <script src="/__/firebase/7.5.2/firebase-database.js"></script>
  <!-- Initialize Firebase -->
  <script src="/__/firebase/init.js"></script>
  <!-- <script src="/vendor/firebase-app.js"></script>
  <script src="/vendor/firebase-auth.js"></script>
  <script src="/vendor/firebase-database.js"></script> -->
  <script src="/vendor/turf.min.js"></script>
  <script src="/vendor/FileSaver.min.js"></script>
  <script src="/vendor/mapbox-gl.js"></script>
  <script src="/vendor/proj4.js"></script>
  <script type="module" src="/src/app.js"></script>

</body>

</html>
